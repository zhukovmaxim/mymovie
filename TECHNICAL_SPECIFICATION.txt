═══════════════════════════════════════════════════════════════
  ТЕХНИЧЕСКОЕ ЗАДАНИЕ: МОЙ КИНОСАЛОН
═══════════════════════════════════════════════════════════════

1. КРАТКОЕ ОПИСАНИЕ ПРОЕКТА

Название: Мой Киносалон

Описание: Мой Киносалон — мобильное Android-приложение, объединяющее 
функции персонального дневника просмотра фильмов и аналитической системы. 
Приложение позволяет систематизировать просмотренные фильмы, анализировать 
кинопредпочтения и получать детальную статистику на основе вашей коллекции.

Цель проекта: Создание интеллектуальной системы, которая помогает 
пользователю систематизировать кинопросмотр, анализировать предпочтения и 
находить интересные киноленты для будущего просмотра за счёт умной 
фильтрации, расширенной статистики и персонализированных рекомендаций.

Аналоги:
• Letterboxd — социальная сеть для кинолюбителей, но требует 
  интернет-соединения и фокусируется на социальных функциях.
• My Movies — каталог фильмов без глубокой аналитики и адаптивных функций.
• IMDb — информационная база без персонализации и оффлайн-режима.

Преимущество "Мой Киносалон": Использование полностью оффлайн-системы с 
расширенной аналитикой, умной фильтрацией, локальными напоминаниями и 
детальной статистикой, которая работает без интернета и хранит все данные 
на устройстве пользователя.


═══════════════════════════════════════════════════════════════
2. ОСНОВНЫЕ ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ
═══════════════════════════════════════════════════════════════

2.1 Пользовательские роли

Гость (Guest)
• Просмотр каталога фильмов с базовой информацией (название, год, режиссер)
• Доступ к экрану регистрации и входа
• Ограниченная функциональность без возможности сохранения данных
• Экран "Статистика" и "Настройки" доступны, но данные привязаны к 
  гостевому аккаунту (userId = 0)
• Возможность выхода из гостевого режима и регистрации

Пользователь (User)
• Регистрация и аутентификация (email/password, гостевой режим)
• Ввод и редактирование личной информации (имя пользователя, email)
• Добавление, редактирование и удаление фильмов в свою коллекцию
• Загрузка постеров фильмов из галереи или съемка с камеры
• Оценка фильмов (1-5 звезд) и выбор статуса (Просмотрено / Хочу 
  посмотреть / В процессе)
• Поиск фильмов по названию, режиссеру, актерам
• Фильтрация по статусу, году, оценке с возможностью комбинирования
• Сортировка коллекции (8 типов: по дате, оценке, году, алфавиту)
• Просмотр детальной статистики (общая и расширенная)
• Настройка напоминаний о фильмах и ежедневных уведомлений
• Экспорт данных (CSV, JSON)
• Управление пользовательскими списками фильмов
• Удаление аккаунта и всех связанных персональных данных
• Восстановление пароля через email/имя пользователя


2.2 Базовый функционал (MVP)

1. Регистрация и вход
• Email/password
• Гостевой режим
• Восстановление пароля
• Валидация полей ввода
• Проверка уникальности email и имени пользователя

2. Профиль пользователя
• Имя пользователя
• Email
• Дата регистрации
• Статистика коллекции (общее количество фильмов)

3. Управление коллекцией фильмов
• Добавление фильма:
  - Название (обязательно)
  - Год выпуска
  - Режиссер
  - Актеры (через запятую)
  - Описание
  - Постер (из галереи или камеры)
  - Оценка (1-5 звезд)
  - Статус (Просмотрено / Хочу посмотреть / В процессе)
  - Дата просмотра (автоматически при статусе "Просмотрено")
  - Рецензия
• Редактирование фильма
• Удаление фильма
• Просмотр деталей фильма

4. Поиск и фильтрация
• Поиск по названию, режиссеру, актерам
• Фильтрация по статусу (Просмотрено / Хочу посмотреть / В процессе)
• Фильтрация по диапазону годов (например, 2000-2020)
• Фильтрация по диапазону оценок (например, 4.0-5.0)
• Комбинирование нескольких фильтров одновременно
• Сброс всех фильтров

5. Сортировка коллекции
• По дате добавления (по возрастанию / по убыванию)
• По оценке (по возрастанию / по убыванию)
• По году выпуска (по возрастанию / по убыванию)
• По названию (по алфавиту A-Z / Z-A)

6. Статистика
Базовая статистика:
• Общее количество фильмов в коллекции
• Количество просмотренных фильмов
• Средняя оценка всех фильмов

Расширенная статистика:
• Любимый режиссер (по количеству фильмов)
• Самый просматриваемый год (по количеству фильмов)
• Год с лучшими оценками (по средней оценке)

7. Мультимедиа
• Загрузка постеров из галереи устройства
• Съемка постеров с камеры
• Автоматическое изменение размера изображений (до 800x800)
• Сохранение изображений во внутреннее хранилище
• Отображение постеров в списке фильмов и на экране деталей
• Placeholder при отсутствии изображения

8. Напоминания и уведомления
• Локальные уведомления для отдельных фильмов:
  - Выбор даты и времени напоминания
  - Уведомление с названием фильма
  - Переход в приложение при нажатии
• Ежедневные напоминания:
  - Включение/выключение в настройках
  - Выбор времени напоминания
  - Повторяющиеся уведомления каждый день
• Канал уведомлений для Android 8.0+
• Отмена напоминаний

9. Пользовательские списки
• Создание кастомных списков фильмов
• Добавление фильмов в списки
• Удаление фильмов из списков
• Редактирование названия и описания списка
• Удаление списков
• Выбор обложки списка (постер одного из фильмов)

10. Экспорт данных
• Экспорт коллекции в JSON формат
• Экспорт коллекции в CSV формат
• Сохранение файлов в папку Downloads
• Уведомление об успешном экспорте

11. Настройки
• Выбор темы приложения (Светлая / Темная / Системная)
• Управление напоминаниями
• Экспорт данных
• Очистка кэша
• Выход из аккаунта
• Информация о приложении


2.3 Нефункциональные требования

• Платформа: Android 7.1+ (API 25+)
• Время отклика UI: до 200 мс
• Полностью оффлайн-работа: Все функции доступны без интернета
• Локальное хранение данных: Room Database (SQLite)
• Поддержка доступности: Масштабирование шрифта, поддержка темной темы
• Локализация: Русский язык
• Безопасность: Изоляция данных между пользователями, безопасное 
  хранение паролей
• Производительность: Оптимизация изображений, эффективные запросы к БД
• Масштабируемость: Поддержка больших коллекций (1000+ фильмов)


═══════════════════════════════════════════════════════════════
3. ТЕХНОЛОГИЧЕСКИЙ СТЕК
═══════════════════════════════════════════════════════════════

• Kotlin — язык программирования
• Android Studio — среда разработки
• Material Design 3 — UI компоненты
• ViewBinding — привязка представлений
• Navigation Component — навигация между экранами
• Room (SQLite) — локальная база данных
• Coroutines + Flow — асинхронные операции и реактивные потоки данных
• ViewModel & LiveData — управление состоянием UI
• Glide — загрузка и отображение изображений
• AlarmManager — локальные напоминания
• FileProvider — безопасный доступ к файлам
• Gson — работа с JSON
• SharedPreferences — хранение настроек пользователя


═══════════════════════════════════════════════════════════════
4. ИНСТРУМЕНТЫ РАЗРАБОТКИ
═══════════════════════════════════════════════════════════════

• Android Studio — основная IDE
• Git — система контроля версий
• GitHub — хостинг репозитория


════════════════════════════════════════════════════════════════
5. АРХИТЕКТУРА
═══════════════════════════════════════════════════════════════

MVVM (Model-View-ViewModel):

• UI (View):
  - Fragments (MovieListFragment, StatisticsFragment, SettingsFragment, 
    MovieListFragment)
  - Activities (LoginActivity, RegisterActivity, AddEditMovieActivity, 
    MovieDetailActivity, MainActivity)
  - ViewBinding для привязки представлений
  - Navigation Component для навигации

• ViewModel:
  - MovieViewModel — управление состоянием фильмов
  - Обработка бизнес-логики фильтрации, сортировки, поиска
  - Реактивные обновления через StateFlow и LiveData

• Repository:
  - MovieRepository — абстракция доступа к данным о фильмах
  - MovieListRepository — управление пользовательскими списками
  - UserRepository (через UserDao) — управление пользователями

• Room Database:
  - MovieDatabase — основная база данных
  - DAO (Data Access Objects): MovieDao, UserDao, MovieListDao
  - Entities: Movie, User, MovieList, MovieListItem
  - TypeConverters для enum (MovieStatus)

• Utils:
  - ImageUtils — работа с изображениями
  - ExportUtils — экспорт данных
  - ReminderUtils — управление напоминаниями


═══════════════════════════════════════════════════════════════
6. СТРУКТУРА БАЗЫ ДАННЫХ
═══════════════════════════════════════════════════════════════

6.1 Таблицы

users
• id (PRIMARY KEY, AUTO_INCREMENT)
• username (TEXT, NOT NULL, UNIQUE)
• email (TEXT, NOT NULL, UNIQUE)
• password (TEXT, NOT NULL) — в production должен быть хеширован
• createdAt (INTEGER, NOT NULL) — timestamp

movies
• id (PRIMARY KEY, AUTO_INCREMENT)
• userId (INTEGER, NOT NULL) — связь с users.id
• title (TEXT, NOT NULL)
• year (INTEGER, NULL)
• director (TEXT, NULL)
• actors (TEXT, NULL) — разделенные запятой
• description (TEXT, NULL)
• posterPath (TEXT, NULL) — путь к локальному файлу
• rating (REAL, NULL) — 1.0-5.0
• watchDate (INTEGER, NULL) — timestamp
• status (TEXT, NOT NULL) — 'WATCHED', 'WANT_TO_WATCH', 'IN_PROGRESS'
• review (TEXT, NULL)
• createdAt (INTEGER, NOT NULL) — timestamp

movie_lists
• id (PRIMARY KEY, AUTO_INCREMENT)
• userId (INTEGER, NOT NULL) — связь с users.id
• name (TEXT, NOT NULL)
• description (TEXT, NULL)
• coverMovieId (INTEGER, NULL) — связь с movies.id
• createdAt (INTEGER, NOT NULL) — timestamp

movie_list_items
• listId (INTEGER, NOT NULL) — связь с movie_lists.id
• movieId (INTEGER, NOT NULL) — связь с movies.id
• addedAt (INTEGER, NOT NULL) — timestamp
• PRIMARY KEY (listId, movieId)

6.2 Индексы
• movies.userId — для быстрого поиска фильмов пользователя
• movies.status — для фильтрации по статусу
• movies.year — для фильтрации и сортировки по году
• movie_lists.userId — для быстрого поиска списков пользователя

6.3 Миграции
• Версия 1: Базовая структура (movies)
• Версия 2: Добавление users, movie_lists, movie_list_items, userId в movies


═══════════════════════════════════════════════════════════════
7. UI/UX — ОСНОВНЫЕ ЭКРАНЫ
═══════════════════════════════════════════════════════════════

7.1 Экран входа и регистрации
• LoginActivity:
  - Поля: Имя пользователя, Пароль
  - Кнопки: Войти, Регистрация, Войти как гость
  - Ссылка: Забыли пароль?
  - Валидация полей с отображением ошибок

• RegisterActivity:
  - Поля: Имя пользователя, Email, Пароль, Подтверждение пароля
  - Кнопка: Зарегистрироваться
  - Валидация: проверка уникальности, формата email, совпадения паролей
  - Автоматический вход после регистрации

7.2 Главный экран (MainActivity)
• Bottom Navigation с тремя вкладками:
  - Коллекция (MovieListFragment)
  - Статистика (StatisticsFragment)
  - Настройки (SettingsFragment)
• Floating Action Button для добавления фильма
• Проверка авторизации при запуске

7.3 Экран списка фильмов (MovieListFragment)
• AppBar с поиском
• Кнопки: Сортировка, Фильтр
• RecyclerView со списком фильмов
• SwipeRefreshLayout для обновления
• Empty state при отсутствии фильмов
• Карточки фильмов с постером, названием, годом, режиссером, оценкой, статусом

7.4 Экран деталей фильма (MovieDetailActivity)
• Полная информация о фильме
• Постер фильма
• Кнопки: Редактировать, Удалить
• Отображение всех полей (название, год, режиссер, актеры, описание, 
  оценка, статус, рецензия)

7.5 Экран добавления/редактирования фильма (AddEditMovieActivity)
• Поля ввода: Название, Год, Режиссер, Актеры, Описание, Рецензия
• RatingBar для оценки
• ToggleGroup для выбора статуса
• Загрузка постера: кнопки "Из галереи" и "С камеры"
• Настройка напоминания: переключатель и выбор даты/времени
• Кнопка: Сохранить

7.6 Экран статистики (StatisticsFragment)
• Базовая статистика:
  - Всего фильмов
  - Просмотрено
  - Средняя оценка
• Расширенная статистика:
  - Любимый режиссер
  - Самый просматриваемый год
  - Год с лучшими оценками
• Карточки с информацией

7.7 Экран настроек (SettingsFragment)
• Внешний вид:
  - Выбор темы (Светлая / Темная / Системная)
• Управление данными:
  - Экспорт в JSON
  - Экспорт в CSV
  - Очистка кэша
  - Выход из аккаунта
• Напоминания:
  - Ежедневные напоминания (включить/выключить)
  - Выбор времени напоминания
• О приложении:
  - Название и версия
  - Описание

7.8 Экран пользовательских списков (MovieListFragment)
• Список созданных списков
• Кнопка создания нового списка
• Карточки списков с обложкой и количеством фильмов
• Переход к деталям списка


═══════════════════════════════════════════════════════════════
8. ТЕСТИРОВАНИЕ
═══════════════════════════════════════════════════════════════

8.1 Unit-тесты бизнес-логики
• Тестирование фильтрации фильмов
• Тестирование сортировки
• Тестирование вычисления статистики
• Тестирование валидации данных

8.2 Интеграционные тесты пользовательских сценариев
• Полный цикл: Регистрация → Добавление фильма → Просмотр → 
  Редактирование → Удаление
• Сценарий поиска и фильтрации
• Сценарий экспорта данных
• Сценарий работы с напоминаниями

8.3 UI-тестирование на реальных устройствах
• Проверка отображения на разных размерах экранов
• Проверка работы в светлой и темной теме
• Проверка навигации между экранами
• Проверка обработки ошибок


═══════════════════════════════════════════════════════════════
9. БЕЗОПАСНОСТЬ И ПРИВАТНОСТЬ
═══════════════════════════════════════════════════════════════

• Хранение паролей: В текущей версии пароли хранятся в открытом виде. 
  В production версии необходимо использовать хеширование (SHA256 или bcrypt)
• Локальное хранение данных: Все данные хранятся на устройстве, не 
  передаются в интернет
• Изоляция данных: Каждый пользователь видит только свои фильмы 
  (фильтрация по userId)
• Безопасный доступ к файлам: Использование FileProvider для доступа к 
  изображениям
• Разрешения: Минимально необходимые разрешения (READ_MEDIA_IMAGES, CAMERA)
• Возможность полного удаления профиля: Удаление всех данных пользователя 
  при выходе из аккаунта (опционально)


═══════════════════════════════════════════════════════════════
10. РОАДМАП ПРОЕКТА
═══════════════════════════════════════════════════════════════

Этап          | Период                    | Цели
--------------|---------------------------|----------------------------------
Sprint 0      | Подготовка                | Настройка проекта, создание 
              |                           | структуры БД, базовые экраны
Sprint 1      | Реализация MVP             | Авторизация, CRUD операции, 
              |                           | базовый UI
Sprint 2      | Расширенный функционал     | Поиск, фильтрация, сортировка, 
              |                           | статистика
Sprint 3      | Мультимедиа и напоминания  | Загрузка фото, съемка с камеры, 
              |                           | система напоминаний
Sprint 4      | UI/UX улучшения           | Темная тема, улучшение дизайна, 
              |                           | пользовательские списки
Sprint 5      | Тестирование и оптимизация| Исправление багов, оптимизация 
              |                           | производительности
Final         | Сдача проекта             | Документация, презентация, 
              |                           | финальная проверка


═══════════════════════════════════════════════════════════════
11. УНИКАЛЬНЫЕ ФУНКЦИИ
═══════════════════════════════════════════════════════════════

• Расширенная аналитика: Детальная статистика с анализом предпочтений 
  (любимый режиссер, лучшие годы)
• Умная фильтрация: Комбинирование множественных фильтров (статус + год + 
  оценка)
• Полная оффлайн-работа: Все функции доступны без интернета
• Многопользовательский режим: Изоляция данных между пользователями с 
  поддержкой гостевого режима
• Локальные напоминания: Гибкая система напоминаний для отдельных фильмов и 
  ежедневные уведомления
• Мультимедиа интеграция: Загрузка постеров из галереи и съемка с камеры с 
  автоматической оптимизацией
• Экспорт данных: Выгрузка коллекции в JSON и CSV для резервного 
  копирования
• Адаптивная статистика: Автоматический расчет расширенной статистики на 
  основе коллекции пользователя

